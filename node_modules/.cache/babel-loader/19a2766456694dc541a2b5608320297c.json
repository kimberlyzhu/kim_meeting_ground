{"ast":null,"code":"var _jsxFileName = \"/Users/kimberlyzhu/Documents/MeetingGround/src/pages/ScheduleEngine.tsx\";\nimport React, { useState } from \"react\";\nimport { useMutation } from \"react-apollo\";\nimport ScheduleCard from \"./ScheduleCard/component\";\nimport styled from \"@emotion/styled\";\nimport { gql } from \"apollo-boost\";\n//npm install --save @emotion/core\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { FaRegCopy } from \"react-icons/fa\";\nconst appendLinktoDB = gql`\n  mutation addLink($url: String!, $duration: Int!, $hostId: ID!) {\n    addLink(url: $url, duration: $duration, hostId: $hostId) {\n      duration\n    }\n  }\n`;\nconst getHostId = gql`\n  query($email: String) {\n    host_email(email: $email) {\n      id\n    }\n  }\n`;\n\nconst ScheduleEngine = ({\n  timeLength,\n  emailID\n}) => {\n  const [duration, setDuration] = useState(timeLength);\n  const [mutate] = useMutation(appendLinktoDB);\n  const [url, setUrl] = useState(\"\");\n  const hostID = {\n    id: \"\"\n  };\n  const {\n    loading: loadingHostId,\n    error: errorHostId,\n    data: hostIdData\n  } = useQuery(getHostId, {\n    variables: {\n      email: emailID\n    }\n  });\n  loadingHostId ? console.log(\"loading Email\") : errorHostId ? console.log(\"An Error occurred:\" + {\n    errorHostId\n  }) : hostID.id = hostIdData.host_email.id;\n  console.log(\"host id here: \" + hostID.id);\n\n  function makeid(length) {\n    var result = \"\";\n    var characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    var charactersLength = characters.length;\n\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n\n    return result;\n  }\n\n  const getUrl = async () => {\n    const urlIdLastPart = makeid(32);\n    const tempId = \"meetingground.com/signup/\" + urlIdLastPart;\n    setUrl(tempId);\n    console.log(\"my url: \" + url);\n    return Promise.resolve(urlIdLastPart);\n  };\n\n  async function addLinkToDb(tempUrl) {\n    // auth_code --> Google Offline Access code\n    const arg = await mutate({\n      variables: {\n        url: tempUrl,\n        duration: duration,\n        hostId: hostID.id\n      }\n    });\n    console.log(arg);\n  }\n\n  const handleGenerate = e => {\n    e.preventDefault();\n    getUrl().then(res => {\n      console.log(\"updated url, adding to db\");\n      addLinkToDb(res).then(() => {\n        console.log(\" linkn appended successfully\");\n      }).catch(err => {\n        console.log(\"an error happened on the link\" + err);\n      });\n    });\n  };\n\n  const copyLink = e => {\n    //execCommand(\"copy\")\n    const el = document.createElement(\"textarea\");\n    el.value = url;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(el);\n  };\n\n  const ScheduleEnginePack = styled.div`\n    display: flex;\n    flex-direction: column;\n    border-radius: 25px;\n    margin: 25px;\n    text-align: center;\n    background: rgba(225, 235, 237);\n    height: 300px;\n    width: 300px;\n    border: 2px solid black;\n  `;\n  return /*#__PURE__*/React.createElement(ScheduleEnginePack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ScheduleCard, {\n    timeLength: timeLength,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    style: {\n      margin: 15,\n      alignContent: \"center\",\n      justifyContent: \"center\",\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexDirection: \"row\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"random_url\",\n    value: url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => copyLink(e),\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    style: {\n      padding: 2,\n      margin: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FaRegCopy, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexDirection: \"column\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => handleGenerate(e),\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    style: {\n      padding: 2,\n      margin: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, \"Generate Link\"))));\n};\n\nexport default ScheduleEngine;","map":{"version":3,"sources":["/Users/kimberlyzhu/Documents/MeetingGround/src/pages/ScheduleEngine.tsx"],"names":["React","useState","useMutation","ScheduleCard","styled","gql","useQuery","FaRegCopy","appendLinktoDB","getHostId","ScheduleEngine","timeLength","emailID","duration","setDuration","mutate","url","setUrl","hostID","id","loading","loadingHostId","error","errorHostId","data","hostIdData","variables","email","console","log","host_email","makeid","length","result","characters","charactersLength","i","charAt","Math","floor","random","getUrl","urlIdLastPart","tempId","Promise","resolve","addLinkToDb","tempUrl","arg","hostId","handleGenerate","e","preventDefault","then","res","catch","err","copyLink","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","ScheduleEnginePack","div","margin","alignContent","justifyContent","flexDirection","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useMutation } from \"react-apollo\";\nimport ScheduleCard from \"./ScheduleCard/component\";\nimport styled from \"@emotion/styled\";\nimport { gql } from \"apollo-boost\";\nimport { Link } from \"react-router-dom\";\n//npm install --save @emotion/core\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { FaRegCopy } from \"react-icons/fa\";\n\nconst appendLinktoDB = gql`\n  mutation addLink($url: String!, $duration: Int!, $hostId: ID!) {\n    addLink(url: $url, duration: $duration, hostId: $hostId) {\n      duration\n    }\n  }\n`;\n\nconst getHostId = gql`\n  query($email: String) {\n    host_email(email: $email) {\n      id\n    }\n  }\n`;\n\nconst ScheduleEngine: React.FC<{ timeLength: number; emailID: string }> = ({\n  timeLength,\n  emailID,\n}) => {\n  const [duration, setDuration] = useState<number>(timeLength);\n  const [mutate] = useMutation(appendLinktoDB);\n  const [url, setUrl] = useState(\"\");\n  const hostID: {\n    id: string;\n  } = {\n    id: \"\",\n  };\n  const {\n    loading: loadingHostId,\n    error: errorHostId,\n    data: hostIdData,\n  } = useQuery(getHostId, {\n    variables: { email: emailID },\n  });\n\n  loadingHostId\n    ? console.log(\"loading Email\")\n    : errorHostId\n    ? console.log(\"An Error occurred:\" + { errorHostId })\n    : (hostID.id = hostIdData.host_email.id);\n\n  console.log(\"host id here: \" + hostID.id);\n\n  function makeid(length: number) {\n    var result = \"\";\n    var characters =\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    var charactersLength = characters.length;\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n  const getUrl = async () => {\n    const urlIdLastPart = makeid(32);\n    const tempId = \"meetingground.com/signup/\" + urlIdLastPart;\n    setUrl(tempId);\n    console.log(\"my url: \" + url);\n    return Promise.resolve(urlIdLastPart);\n  };\n\n  async function addLinkToDb(tempUrl: string) {\n    // auth_code --> Google Offline Access code\n    const arg = await mutate({\n      variables: {\n        url: tempUrl,\n        duration: duration,\n        hostId: hostID.id,\n      },\n    });\n    console.log(arg);\n  }\n\n  const handleGenerate = (e: any) => {\n    e.preventDefault();\n    getUrl().then((res) => {\n      console.log(\"updated url, adding to db\");\n      addLinkToDb(res)\n        .then(() => {\n          console.log(\" linkn appended successfully\");\n        })\n        .catch((err) => {\n          console.log(\"an error happened on the link\" + err);\n        });\n    });\n  };\n\n  const copyLink = (e: any) => {\n    //execCommand(\"copy\")\n    const el = document.createElement(\"textarea\");\n    el.value = url;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(el);\n  };\n\n  const ScheduleEnginePack = styled.div`\n    display: flex;\n    flex-direction: column;\n    border-radius: 25px;\n    margin: 25px;\n    text-align: center;\n    background: rgba(225, 235, 237);\n    height: 300px;\n    width: 300px;\n    border: 2px solid black;\n  `;\n\n  return (\n    <ScheduleEnginePack>\n      <ScheduleCard timeLength={timeLength} />\n      <form\n        style={{\n          margin: 15,\n          alignContent: \"center\",\n          justifyContent: \"center\",\n          flexDirection: \"column\",\n        }}\n      >\n        <div style={{ flexDirection: \"row\" }}>\n          <input id=\"random_url\" value={url} />\n          <button\n            onClick={(e) => copyLink(e)}\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            style={{ padding: 2, margin: 15 }}\n          >\n            <FaRegCopy />\n          </button>\n        </div>\n        <div style={{ flexDirection: \"column\" }}>\n          <button\n            onClick={(e) => handleGenerate(e)}\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            style={{ padding: 2, margin: 15 }}\n          >\n            Generate Link\n          </button>\n        </div>\n      </form>\n    </ScheduleEnginePack>\n  );\n};\n\nexport default ScheduleEngine;\n"]},"metadata":{},"sourceType":"module"}